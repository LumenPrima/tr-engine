<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Endpoint Tester</title>
    <link rel="stylesheet" href="/css/api-test.css">
    <script src="/js/api-test.js" defer></script>
</head>
<body>
    <div class="container">
        <div class="endpoints">
            <h1>API Endpoint Tester</h1>
    
    <div class="category">
        <h2>System Information</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/hello">/api/v1/hello</a></h3>
            <div class="description">Health check endpoint with system stats</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/config">/api/v1/config</a></h3>
            <div class="description">Get API configuration</div>
        </div>
    </div>

    <div class="category">
        <h2>Systems</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/systems">/api/v1/systems</a></h3>
            <div class="description">Get current status of all systems</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/systems/performance">/api/v1/systems/performance</a></h3>
            <div class="description">Get system performance statistics</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/systems/sys1">/api/v1/systems/{sys_name}</a></h3>
            <div class="description">Get detailed status for a specific system</div>
        </div>
    </div>

    <div class="category">
        <h2>Calls</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/calls">/api/v1/calls</a></h3>
            <div class="description">Get historical calls</div>
            <div class="params">Optional params: limit, offset, start, end, sys_name, talkgroup, unit, emergency</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/calls?limit=10">/api/v1/calls?limit=10</a> - Get last 10 calls</div>
                <div><a href="/api/v1/calls?limit=50&offset=100">/api/v1/calls?limit=50&offset=100</a> - Get 50 calls starting from 100th record</div>
                <div><a href="/api/v1/calls?sys_name=sys1&talkgroup=12345">/api/v1/calls?sys_name=sys1&talkgroup=12345</a> - Filter by system and talkgroup</div>
                <div><a href="/api/v1/calls?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z">/api/v1/calls?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z</a> - Get calls for specific date range</div>
                <div><a href="/api/v1/calls?emergency=true&limit=20">/api/v1/calls?emergency=true&limit=20</a> - Get last 20 emergency calls</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/calls/active">/api/v1/calls/active</a></h3>
            <div class="description">Get currently active calls</div>
            <div class="params">Optional params: sys_name, talkgroup, emergency</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/calls/active?sys_name=sys1">/api/v1/calls/active?sys_name=sys1</a> - Active calls for specific system</div>
                <div><a href="/api/v1/calls/active?emergency=true">/api/v1/calls/active?emergency=true</a> - Active emergency calls</div>
                <div><a href="/api/v1/calls/active?talkgroup=12345">/api/v1/calls/active?talkgroup=12345</a> - Active calls for specific talkgroup</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/calls/events">/api/v1/calls/events</a></h3>
            <div class="description">Get currently active events</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/calls/talkgroup/12345">/api/v1/calls/talkgroup/{talkgroup_id}</a></h3>
            <div class="description">Get historical activity for a specific talkgroup</div>
            <div class="params">Optional params: limit, start, end</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/calls/talkgroup/12345?limit=25">/api/v1/calls/talkgroup/12345?limit=25</a> - Last 25 calls for talkgroup</div>
                <div><a href="/api/v1/calls/talkgroup/12345?start=2024-01-30T00:00:00Z">/api/v1/calls/talkgroup/12345?start=2024-01-30T00:00:00Z</a> - Calls since specific time</div>
            </div>
        </div>
    </div>

    <div class="category">
        <h2>Units</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/units">/api/v1/units</a></h3>
            <div class="description">Get all units</div>
            <div class="params">Optional params: limit, offset</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/units?limit=100">/api/v1/units?limit=100</a> - Get last 100 units</div>
                <div><a href="/api/v1/units?limit=50&offset=50">/api/v1/units?limit=50&offset=50</a> - Get units 51-100</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/units/active">/api/v1/units/active</a></h3>
            <div class="description">Get all currently active units</div>
            <div class="params">Optional params: limit, offset, window</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/units/active?window=10">/api/v1/units/active?window=10</a> - Units active in last 10 minutes</div>
                <div><a href="/api/v1/units/active?limit=50&window=30">/api/v1/units/active?limit=50&window=30</a> - Last 50 units active in 30 minutes</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/units/12345">/api/v1/units/{unit_id}</a></h3>
            <div class="description">Get current status and recent activity for a specific unit</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/units/12345/history">/api/v1/units/{unit_id}/history</a></h3>
            <div class="description">Get complete history for a specific unit</div>
            <div class="params">Optional params: limit, offset</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/units/12345/history?limit=50">/api/v1/units/12345/history?limit=50</a> - Last 50 activities</div>
                <div><a href="/api/v1/units/12345/history?limit=25&offset=25">/api/v1/units/12345/history?limit=25&offset=25</a> - Activities 26-50</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/units/talkgroup/12345">/api/v1/units/talkgroup/{talkgroup_id}</a></h3>
            <div class="description">Get all units currently affiliated with a talkgroup</div>
            <div class="params">Optional params: limit, offset</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/units/talkgroup/12345?limit=20">/api/v1/units/talkgroup/12345?limit=20</a> - Last 20 units in talkgroup</div>
                <div><a href="/api/v1/units/talkgroup/12345?limit=10&offset=10">/api/v1/units/talkgroup/12345?limit=10&offset=10</a> - Units 11-20 in talkgroup</div>
            </div>
        </div>
    </div>

    <div class="category">
        <h2>Talkgroups</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/talkgroups">/api/v1/talkgroups</a></h3>
            <div class="description">Get talkgroups with advanced filtering</div>
            <div class="params">Optional params: sys_name, sys_num, talkgroup, emergency, category, group</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/talkgroups?sys_name=sys1">/api/v1/talkgroups?sys_name=sys1</a> - Talkgroups for specific system</div>
                <div><a href="/api/v1/talkgroups?category=fire">/api/v1/talkgroups?category=fire</a> - Fire department talkgroups</div>
                <div><a href="/api/v1/talkgroups?emergency=true">/api/v1/talkgroups?emergency=true</a> - Emergency talkgroups</div>
                <div><a href="/api/v1/talkgroups?sys_name=sys1&category=police">/api/v1/talkgroups?sys_name=sys1&category=police</a> - Police talkgroups for system</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/talkgroups/12345">/api/v1/talkgroups/{talkgroup_id}</a></h3>
            <div class="description">Get talkgroup by ID</div>
        </div>
    </div>

    <div class="category">
        <h2>Audio</h2>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/audio/call/12345_1234567890">/api/v1/audio/call/{call_id}</a></h3>
            <div class="description">Retrieve audio recording for specific call</div>
            <div class="params">Optional params: format</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/audio/call/12345_1234567890/metadata">/api/v1/audio/call/{call_id}/metadata</a></h3>
            <div class="description">Get metadata for an audio file</div>
        </div>
        <div class="endpoint">
            <h3><span class="method delete">DELETE</span><a href="/api/v1/audio/call/12345_1234567890">/api/v1/audio/call/{call_id}</a></h3>
            <div class="description">Delete an audio file and its metadata</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/audio/archive">/api/v1/audio/archive</a></h3>
            <div class="description">Search archived audio recordings</div>
            <div class="params">Optional params: limit, offset, start, end, talkgroup, sys_name, format, emergency</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/audio/archive?limit=25">/api/v1/audio/archive?limit=25</a> - Last 25 recordings</div>
                <div><a href="/api/v1/audio/archive?talkgroup=12345&format=m4a">/api/v1/audio/archive?talkgroup=12345&format=m4a</a> - M4A recordings for talkgroup</div>
                <div><a href="/api/v1/audio/archive?sys_name=sys1&emergency=true">/api/v1/audio/archive?sys_name=sys1&emergency=true</a> - Emergency recordings for system</div>
                <div><a href="/api/v1/audio/archive?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z">/api/v1/audio/archive?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z</a> - Recordings for date range</div>
            </div>
        </div>
    </div>

    <div class="category">
        <h2>Transcription</h2>
        <div class="endpoint">
            <h3><span class="method post">POST</span><a href="/api/v1/transcription/process/12345_1234567890">/api/v1/transcription/process/{call_id}</a></h3>
            <div class="description">Transcribe an audio file</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/transcription/12345_1234567890">/api/v1/transcription/{call_id}</a></h3>
            <div class="description">Get transcription for a specific call</div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/transcription/12345/recent">/api/v1/transcription/{talkgroup_id}/recent</a></h3>
            <div class="description">Get recent transcriptions for a talkgroup</div>
            <div class="params">Optional params: limit, start, end</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/transcription/12345/recent?limit=10">/api/v1/transcription/12345/recent?limit=10</a> - Last 10 transcriptions</div>
                <div><a href="/api/v1/transcription/12345/recent?start=2024-01-30T00:00:00Z">/api/v1/transcription/12345/recent?start=2024-01-30T00:00:00Z</a> - Transcriptions since date</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/transcription/stats">/api/v1/transcription/stats</a></h3>
            <div class="description">Get transcription statistics</div>
            <div class="params">Optional params: talkgroup, start, end</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/transcription/stats?talkgroup=12345">/api/v1/transcription/stats?talkgroup=12345</a> - Stats for talkgroup</div>
                <div><a href="/api/v1/transcription/stats?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z">/api/v1/transcription/stats?start=2024-01-30T00:00:00Z&end=2024-01-30T23:59:59Z</a> - Stats for date range</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/transcription/group?time=1234567890">/api/v1/transcription/group</a></h3>
            <div class="description">Get a group of transcriptions closest to a timestamp</div>
            <div class="params">Required: time, Optional: limit</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/transcription/group?time=1234567890&limit=5">/api/v1/transcription/group?time=1234567890&limit=5</a> - 5 closest transcriptions</div>
                <div><a href="/api/v1/transcription/group?time=1234567890&limit=10">/api/v1/transcription/group?time=1234567890&limit=10</a> - 10 closest transcriptions</div>
            </div>
        </div>
        <div class="endpoint">
            <h3><span class="method get">GET</span><a href="/api/v1/transcription/12345/group?time=1234567890">/api/v1/transcription/{talkgroup_id}/group</a></h3>
            <div class="description">Get a group of transcriptions closest to a timestamp for a specific talkgroup</div>
            <div class="params">Required: time, Optional: limit</div>
            <div class="examples">
                Examples:
                <div><a href="/api/v1/transcription/12345/group?time=1234567890&limit=5">/api/v1/transcription/12345/group?time=1234567890&limit=5</a> - 5 closest for talkgroup</div>
                <div><a href="/api/v1/transcription/12345/group?time=1234567890&limit=10">/api/v1/transcription/12345/group?time=1234567890&limit=10</a> - 10 closest for talkgroup</div>
            </div>
        </div>
    </div>

        </div>
        <div class="response-panel">
            <div class="response-container">
                <h3>Response</h3>
                <pre><code>Click an endpoint to see its response...</code></pre>
            </div>
        </div>
    </div>

</body>
</html>
